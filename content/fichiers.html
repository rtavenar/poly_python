

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Lecture et écriture de fichiers textuels &#8212; Introduction à Python</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous">
    <link href="../_static/css/index.css" rel="stylesheet">
    <link rel="stylesheet" href="../_static/sphinx-book-theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/jupyter-sphinx.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/sphinx-book-theme.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/mystnb.js"></script>
    <script src="../_static/sphinx-book-theme.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.18.0/dist/embed-amd.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Récupération de données à partir d’API web" href="api.html" />
    <link rel="prev" title="Les dictionnaires" href="dict.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="docsearch:language" content="en">



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../index.html">
  
  <img src="../_static/logo_ur2.svg" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">Introduction à Python</h1>
  
</a>
</div>

<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  
  <ul class="nav sidenav_l1">
  <li class="">
    <a href="intro.html">Introduction</a>
  </li>
  <li class="">
    <a href="struct.html">Structures de données et structures de contrôle</a>
  </li>
  <li class="">
    <a href="dates.html">Les dates</a>
  </li>
  <li class="">
    <a href="listes.html">Les listes</a>
  </li>
  <li class="">
    <a href="chaines.html">Les chaînes de caractères</a>
  </li>
  <li class="">
    <a href="dict.html">Les dictionnaires</a>
  </li>
  <li class="active">
    <a href="">Lecture et écriture de fichiers textuels</a>
  </li>
  <li class="">
    <a href="api.html">Récupération de données à partir d’API web</a>
  </li>
  <li class="">
    <a href="test.html">Tester son code</a>
  </li>
  <li class="">
    <a href="conclusion.html">Conclusion</a>
  </li>
<li class="navbar-special">
<p class="margin-caption">Corrigé des exercices</p>
</li>
  <li class="">
    <a href="solutions.html">Toutes les solutions</a>
  </li>
</ul>
</nav>

 <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse" data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu" aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation" title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        <div class="dropdown-buttons-trigger">
            <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i class="fas fa-download"></i></button>

            
            <div class="dropdown-buttons">
                <!-- ipynb file if we had a myst markdown file -->
                
                <!-- Download raw file -->
                <a class="dropdown-buttons" href="../_sources/content/fichiers.md"><button type="button" class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip" data-placement="left">.md</button></a>
                <!-- Download PDF via print -->
                <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF" onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
            </div>
            
        </div>

        <!-- Source interaction buttons -->
        

        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="bottom" onclick="toggleFullScreen()" title="Fullscreen mode"><i class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->
        
    </div>
    <div class="d-none d-md-block col-md-2 bd-toc show">
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="nav section-nav flex-column">
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#lecture-de-fichiers-textuels" class="nav-link">Lecture de fichiers textuels</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h3">
            <a href="#fichiers-textuels-generiques" class="nav-link">Fichiers textuels génériques</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#fichiers-comma-separated-values-csv" class="nav-link">Fichiers Comma-Separated Values (CSV)</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h4">
            <a href="#cas-des-fichiers-a-en-tete" class="nav-link">Cas des fichiers à en-tête</a>
        </li>
    
        <li class="nav-item toc-entry toc-h4">
            <a href="#un-peu-de-magie" class="nav-link">Un peu de magie…</a>
        </li>
    
            </ul>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#fichiers-javascript-object-notation-json" class="nav-link">Fichiers JavaScript Object Notation (JSON)</a>
        </li>
    
            </ul>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#ecriture-de-fichiers-textuels" class="nav-link">Écriture de fichiers textuels</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h3">
            <a href="#id2" class="nav-link">Fichiers textuels génériques</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#fichiers-csv" class="nav-link">Fichiers CSV</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#fichiers-json" class="nav-link">Fichiers JSON</a>
        </li>
    
            </ul>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#manipulation-de-fichiers-en-python-avec-le-module-os" class="nav-link">Manipulation de fichiers en Python avec le module os</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#bonus-utilisation-de-with" class="nav-link">Bonus : utilisation de with</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#exercices" class="nav-link">Exercices</a>
        </li>
    
    </ul>
</nav>


    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="lecture-et-ecriture-de-fichiers-textuels">
<h1>Lecture et écriture de fichiers textuels<a class="headerlink" href="#lecture-et-ecriture-de-fichiers-textuels" title="Permalink to this headline">¶</a></h1>
<p>Dans ce chapitre, nous nous intéressons à la lecture/écriture de fichiers textuels par un programme Python.
Un premier élément qu’il est nécessaire de maîtriser pour lire ou écrire des fichiers textuels est la notion d’encodage.
Il faut savoir qu’il existe plusieurs façons d’encoder un texte.
Nous nous focaliserons ici sur les deux encodages que vous êtes les plus susceptibles de rencontrer (mais sachez qu’il en existe bien d’autres) :</p>
<ul class="simple">
<li><p>l’encodage Unicode 8 bits (UTF-8), dont le code en python est <code class="docutils literal notranslate"><span class="pre">&quot;utf-8&quot;</span></code> ;</p></li>
<li><p>l’encodage Latin-1 (ISO-8859-1) dont le code en python est <code class="docutils literal notranslate"><span class="pre">&quot;iso-8859-1&quot;</span></code>.</p></li>
</ul>
<p>La principale différence entre ces deux encodage réside dans leur façon de coder les accents.
Ainsi, si le texte que vous lisez/écrivez ne contient aucun accent ou caractère spécial, il est probable que la question de l’encodage ne soit pas problématique dans votre cas.
Au contraire, s’il est possible que vous utilisiez de tels caractères, il faudra bien faire attention à l’encodage utilisé, que vous spécifierez à l’ouverture du fichier.
Si votre programme doit lire un fichier, il faudra donc vous assurer de l’encodage associé à ce fichier (en l’ouvrant par exemple avec un éditeur de texte qui soit suffisamment avancé pour vous fournir cette information).
Si vous écrivez un programme qui écrit un fichier, il faudra vous poser la question de l’utilisation future qui sera faite de ce fichier : s’il est amené à être ouvert par un autre utilisateur, il serait pertinent de vous demander quel encodage sera le moins problématique pour cet utilisateur, par exemple.</p>
<p>Si vous n’avez pas de contrainte extérieure pour ce qui est de l’encodage, vous utiliserez l’encodage UTF-8 par défaut.</p>
<div class="section" id="lecture-de-fichiers-textuels">
<h2>Lecture de fichiers textuels<a class="headerlink" href="#lecture-de-fichiers-textuels" title="Permalink to this headline">¶</a></h2>
<p>Ce que nous appelons lecture de fichiers textuels en Python consiste à copier le contenu d’un fichier dans une (ou plusieurs) chaîne(s) de caractères.
Cela implique deux étapes en Python :</p>
<ol class="simple">
<li><p>ouvrir le fichier en lecture ;</p></li>
<li><p>parcourir le contenu du fichier.</p></li>
</ol>
<p>La première étape d’ouverture du fichier en lecture est commune à tous les types de fichiers textuels.
En supposant que le nom du fichier à ouvrir soit stocké sous forme de chaîne de caractères dans la variable <code class="docutils literal notranslate"><span class="pre">nom_fichier</span></code>, le code suivant ouvre un fichier en lecture avec l’encodage UTF-8 et stocke dans la variable <code class="docutils literal notranslate"><span class="pre">fp</span></code> un pointeur sur l’endroit où nous sommes rendus dans notre lecture du fichier (pour l’instant, le début du fichier) :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fp</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">nom_fichier</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Le second argument (<code class="docutils literal notranslate"><span class="pre">&quot;r&quot;</span></code>) indique que le fichier doit être ouvert en mode <em>read</em>, donc en lecture.</p>
<div class="section" id="fichiers-textuels-generiques">
<h3>Fichiers textuels génériques<a class="headerlink" href="#fichiers-textuels-generiques" title="Permalink to this headline">¶</a></h3>
<p>Une fois le fichier ouvert en lecture, on peut le lire ligne par ligne à l’aide de la boucle suivante :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fp</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">nom_fichier</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">ligne</span> <span class="ow">in</span> <span class="n">fp</span><span class="o">.</span><span class="n">readlines</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">ligne</span><span class="p">)</span>
</pre></div>
</div>
<p>Ici, la variable <code class="docutils literal notranslate"><span class="pre">ligne</span></code>, de type chaîne de caractères, contiendra successivement le texte de chacune des lignes du fichier considéré.</p>
</div>
<div class="section" id="fichiers-comma-separated-values-csv">
<h3>Fichiers <em>Comma-Separated Values</em> (CSV)<a class="headerlink" href="#fichiers-comma-separated-values-csv" title="Permalink to this headline">¶</a></h3>
<p>Les fichiers <em>Comma-Separated Values</em> (CSV) permettent de stocker des données organisées sous la forme de tableaux dans des fichiers textuels.
À l’origine, ces fichiers étaient organisées par ligne et au sein de chaque ligne les cellules du tableau (correspondant aux différentes colonnes) étaient séparées par des virgules (d’où le nom de ce type de fichiers).
Aujourd’hui, la définition de ce format (<a class="reference external" href="https://tools.ietf.org/html/rfc4180">lien</a>) est plus générale que cela et différents délimiteurs sont acceptés.
Pour manipuler ces fichiers, il existe en Python un module dédié, appelé <code class="docutils literal notranslate"><span class="pre">csv</span></code>.
Ce module contient notamment une fonction <code class="docutils literal notranslate"><span class="pre">reader</span></code> permettant de simplifier la lecture de fichiers CSV.
La syntaxe d’utilisation de cette fonction est la suivante (vous remarquerez la présence de l’attribut <code class="docutils literal notranslate"><span class="pre">delimiter</span></code>) :</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">csv</span>

<span class="n">nom_fichier</span> <span class="o">=</span> <span class="s2">&quot;simple.csv&quot;</span>

<span class="c1"># Contenu supposé du fichier :</span>
<span class="c1"># 1;2;3;4;5</span>
<span class="c1"># a;b;c;d;e</span>
<span class="c1"># xx;xx;xx;xx;xx</span>
<span class="c1"># 0.4;0.5;0.7;0.8;0.9</span>

<span class="n">fp</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">nom_fichier</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">ligne</span> <span class="ow">in</span> <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s2">&quot;;&quot;</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">cellule</span> <span class="ow">in</span> <span class="n">ligne</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">cellule</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Fin de ligne&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>1
2
3
4
5
Fin de ligne
a
b
c
d
e
Fin de ligne
xx
xx
xx
xx
xx
Fin de ligne
0.4
0.5
0.7
0.8
0.9
Fin de ligne
</pre></div>
</div>
</div>
</div>
<p>On remarque ici que, contrairement au cas de fichiers textuels génériques, la variable de boucle <code class="docutils literal notranslate"><span class="pre">ligne</span></code> n’est plus une chaîne de caractères mais une liste de chaînes de caractères.
Les éléments de cette liste sont les cellules du tableau représenté par le fichier CSV.</p>
<div class="section" id="cas-des-fichiers-a-en-tete">
<h4>Cas des fichiers à en-tête<a class="headerlink" href="#cas-des-fichiers-a-en-tete" title="Permalink to this headline">¶</a></h4>
<p>Souvent, les fichiers CSV comprennent une première ligne d’en-tête, comme dans l’exemple suivant :</p>
<div class="highlight-csv notranslate"><div class="highlight"><pre><span></span>NOM;PRENOM;AGE
Lemarchand;John;23
Trias;Anne;
</pre></div>
</div>
<p>Si l’on souhaite que, lors de la lecture du fichier CSV, chaque ligne soit représentée par un dictionnaire dont les clés sont les noms de colonnes (lus dans l’en-tête) et les valeurs associées sont celles lues dans la ligne courante, on utilisera <code class="docutils literal notranslate"><span class="pre">csv.DictReader</span></code> au lieu de <code class="docutils literal notranslate"><span class="pre">csv.reader</span></code> :</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">csv</span>

<span class="n">nom_fichier</span> <span class="o">=</span> <span class="s2">&quot;entete.csv&quot;</span>

<span class="c1"># Contenu supposé du fichier :</span>
<span class="c1"># NOM;PRENOM;AGE</span>
<span class="c1"># Lemarchand;John;23</span>
<span class="c1"># Trias;Anne;</span>

<span class="n">fp</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">nom_fichier</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">ligne</span> <span class="ow">in</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictReader</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s2">&quot;;&quot;</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">cle</span><span class="p">,</span> <span class="n">valeur</span> <span class="ow">in</span> <span class="n">ligne</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">cle</span><span class="p">,</span> <span class="n">valeur</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;--Fin de ligne--&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>NOM Lemarchand
PRENOM John
AGE 23
--Fin de ligne--
NOM Trias
PRENOM Anne
AGE 
--Fin de ligne--
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="un-peu-de-magie">
<h4>Un peu de magie…<a class="headerlink" href="#un-peu-de-magie" title="Permalink to this headline">¶</a></h4>
<p>Dans certains cas, on ne sait pas à l’avance quel délimiteur est utilisé pour le fichier CSV à lire. On peut demander au module CSV de deviner le <em>dialecte</em><a class="footnote-reference brackets" href="#dialect" id="id1">1</a> d’un fichier en lisant le début de ce fichier.
Dans ce cas, la lecture du fichier se fera en 4 étapes :</p>
<ol class="simple">
<li><p>Ouverture du fichier en lecture ;</p></li>
<li><p>Lecture des <em>n</em> premiers caractères du fichier pour tenter de deviner son dialecte ;</p></li>
<li><p>“Rembobinage” du fichier pour recommencer la lecture au début ;</p></li>
<li><p>Lecture du fichier en utilisant le dialecte détecté à l’étape 2.</p></li>
</ol>
<p>Le choix du paramètre <em>n</em> doit être un compromis : il faut lire suffisamment de caractères pour que la détection de dialecte soit fiable, tout en sachant que lire beaucoup de caractères prendra du temps.
En pratique, lire les 1000 premiers caractères d’un fichier est souvent suffisant pour déterminer son dialecte.</p>
<p>On obtient alors une syntaxe du type :</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">csv</span>

<span class="n">nom_fichier</span> <span class="o">=</span> <span class="s2">&quot;simple.csv&quot;</span>

<span class="c1"># Contenu supposé du fichier :</span>
<span class="c1"># 1,2,3</span>
<span class="c1"># a,b</span>

<span class="n">fp</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">nom_fichier</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>  <span class="c1"># Étape 1.</span>
<span class="n">dialecte</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">Sniffer</span><span class="p">()</span><span class="o">.</span><span class="n">sniff</span><span class="p">(</span><span class="n">fp</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1000</span><span class="p">))</span>  <span class="c1"># Étape 2.</span>
<span class="n">fp</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>                                     <span class="c1"># Étape 3. À ne pas oublier !</span>
<span class="k">for</span> <span class="n">ligne</span> <span class="ow">in</span> <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="n">dialect</span><span class="o">=</span><span class="n">dialecte</span><span class="p">):</span> <span class="c1"># Étape 4.</span>
    <span class="k">for</span> <span class="n">cellule</span> <span class="ow">in</span> <span class="n">ligne</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">cellule</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Fin de ligne&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>1
2
3
4
5
Fin de ligne
a
b
c
d
e
Fin de ligne
xx
xx
xx
xx
xx
Fin de ligne
0.4
0.5
0.7
0.8
0.9
Fin de ligne
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="fichiers-javascript-object-notation-json">
<h3>Fichiers <em>JavaScript Object Notation</em> (JSON)<a class="headerlink" href="#fichiers-javascript-object-notation-json" title="Permalink to this headline">¶</a></h3>
<p>Les fichiers <em>JavaScript Object Notation</em> (JSON) permettent de stocker des données structurées (par exemple avec une organisation hiérarchique). Un document JSON s’apparente à un dictionnaire en Python (à la nuance près que les clés d’un document JSON sont forcément des chaînes de caractères).
Voici un exemple de document JSON :</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;num_etudiant&quot;</span><span class="p">:</span> <span class="s2">&quot;21300000&quot;</span><span class="p">,</span>
    <span class="nt">&quot;notes&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">12</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">14</span><span class="p">],</span>
    <span class="nt">&quot;date_de_naissance&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;jour&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nt">&quot;mois&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nt">&quot;annee&quot;</span><span class="p">:</span> <span class="mi">1995</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>En Python, pour lire de tels fichiers, on dispose du module <code class="docutils literal notranslate"><span class="pre">json</span></code> qui contient une fonction <code class="docutils literal notranslate"><span class="pre">load</span></code> :</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>

<span class="n">nom_fichier</span> <span class="o">=</span> <span class="s2">&quot;simple.json&quot;</span>

<span class="c1"># Contenu supposé du fichier :</span>
<span class="c1"># {</span>
<span class="c1">#    &quot;num_etudiant&quot;: &quot;21300000&quot;,</span>
<span class="c1">#    &quot;notes&quot;: [12, 5, 14],</span>
<span class="c1">#    &quot;date_de_naissance&quot;: {</span>
<span class="c1">#        &quot;jour&quot;: 1,</span>
<span class="c1">#        &quot;mois&quot;: 1,</span>
<span class="c1">#        &quot;annee&quot;: 1995</span>
<span class="c1">#    }</span>
<span class="c1"># }</span>

<span class="n">fp</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">nom_fichier</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fp</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>{&#39;num_etudiant&#39;: &#39;21300000&#39;, &#39;notes&#39;: [12, 5, 14], &#39;date_de_naissance&#39;: {&#39;jour&#39;: 1, &#39;mois&#39;: 1, &#39;annee&#39;: 1995}}
</pre></div>
</div>
</div>
</div>
<p>Il est à noter qu’un fichier JSON peut également contenir une liste de dictionnaires, comme dans l’exemple suivant :</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[{</span>
    <span class="nt">&quot;num_etudiant&quot;</span><span class="p">:</span> <span class="s2">&quot;21300000&quot;</span><span class="p">,</span>
    <span class="nt">&quot;notes&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">12</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">14</span><span class="p">],</span>
    <span class="nt">&quot;date_de_naissance&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;jour&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nt">&quot;mois&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nt">&quot;annee&quot;</span><span class="p">:</span> <span class="mi">1995</span>
    <span class="p">}</span>
<span class="p">},</span>
<span class="p">{</span>
    <span class="nt">&quot;num_etudiant&quot;</span><span class="p">:</span> <span class="s2">&quot;21300001&quot;</span><span class="p">,</span>
    <span class="nt">&quot;notes&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">14</span><span class="p">],</span>
    <span class="nt">&quot;date_de_naissance&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;jour&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nt">&quot;mois&quot;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
        <span class="nt">&quot;annee&quot;</span><span class="p">:</span> <span class="mi">1989</span>
    <span class="p">}</span>
<span class="p">}]</span>
</pre></div>
</div>
<p>Dans ce cas, <code class="docutils literal notranslate"><span class="pre">json.load</span></code> retournera une liste de dictionnaires au lieu d’un dictionnaire, bien évidemment.</p>
<p>Enfin, si l’on a stocké dans une variable une chaîne de caractères dont le contenu correspond à un document JSON, on peut également la transformer en dictionnaire (ou en liste de dictionnaires) à l’aide de la fonction <code class="docutils literal notranslate"><span class="pre">json.loads</span></code> (attention au “s” final) :</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ch</span> <span class="o">=</span> <span class="s1">&#39;{&quot;num_etudiant&quot;: &quot;21300000&quot;,  &quot;notes&quot;: [12, 5, 14]}&#39;</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">ch</span><span class="p">)</span>  <span class="c1"># loads : load (from) string</span>
<span class="nb">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>{&#39;num_etudiant&#39;: &#39;21300000&#39;, &#39;notes&#39;: [12, 5, 14]}
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="ecriture-de-fichiers-textuels">
<h2>Écriture de fichiers textuels<a class="headerlink" href="#ecriture-de-fichiers-textuels" title="Permalink to this headline">¶</a></h2>
<p>Ce que nous apellons écriture de fichiers textuels en Python consiste à copier le contenu d’une (ou plusieurs) chaîne(s) de caractères dans un fichier.
Cela implique trois étapes en Python :</p>
<ol class="simple">
<li><p>ouvrir le fichier en écriture ;</p></li>
<li><p>ajouter du contenu dans le fichier ;</p></li>
<li><p>fermer le fichier.</p></li>
</ol>
<p>La première étape d’ouverture du fichier en écriture est commune à tous les types de fichiers textuels.
En supposant que le nom du fichier à ouvrir est stocké sous forme de chaîne de caractères dans la variable <code class="docutils literal notranslate"><span class="pre">nom_fichier</span></code>, le code suivant ouvre un fichier en écriture avec l’encodage UTF-8 et stocke dans la variable <code class="docutils literal notranslate"><span class="pre">fp</span></code> un pointeur sur l’endroit où nous sommes rendus dans notre écriture du fichier (pour l’instant, le début du fichier) :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fp</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">nom_fichier</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Le second argument (<code class="docutils literal notranslate"><span class="pre">&quot;w&quot;</span></code>) indique que le fichier doit être ouvert en mode <em>write</em>, donc en écriture.</p>
<p>Si le fichier en question existait déjà, son contenu est tout d’abord écrasé et on repart d’un fichier vide.
Si l’on souhaite au contraire ajouter du texte à la fin d’un fichier existant, on utilisera le mode <em>append</em>, symbolisé par la lettre <code class="docutils literal notranslate"><span class="pre">&quot;a&quot;</span></code> :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fp</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">nom_fichier</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Une fois les instructions d’écriture exécutées (voir plus bas), on doit fermer le fichier pour s’assurer que l’écriture sera effective :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fp</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>Il est à noter que l’on peut, dans certains cas, se dispenser de fermer explicitement le fichier.
Par exemple, si notre code est inclus dans un script Python, dès la fin de l’exécution du script, tous les fichiers ouverts en écriture par le script sont automatiquement fermés.</p>
<div class="section" id="id2">
<h3>Fichiers textuels génériques<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>Pour ajouter du contenu à un fichier pointé par la variable <code class="docutils literal notranslate"><span class="pre">fp</span></code>, il suffit ensuite d’utiliser la méthode <code class="docutils literal notranslate"><span class="pre">write</span></code> :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;La vie est belle</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Notez que, contrairement à la fonction <code class="docutils literal notranslate"><span class="pre">print</span></code> à laquelle vous êtes habitué, la méthode <code class="docutils literal notranslate"><span class="pre">write</span></code> ne rajoute pas de caractère de fin de ligne après la chaîne de caractères passée en argument, il faut donc inclure ce caractère <code class="docutils literal notranslate"><span class="pre">&quot;\n&quot;</span></code> à la fin de la chaîne de caractères passée en argument, si vous souhaitez inclure un retour à la ligne.</p>
</div>
<div class="section" id="fichiers-csv">
<h3>Fichiers CSV<a class="headerlink" href="#fichiers-csv" title="Permalink to this headline">¶</a></h3>
<p>Le module <code class="docutils literal notranslate"><span class="pre">csv</span></code> déjà cité plus haut contient également une fonction <code class="docutils literal notranslate"><span class="pre">writer</span></code> permettant de simplifier l’écriture de fichiers CSV.
La syntaxe d’utilisation de cette fonction est la suivante :</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">csv</span>

<span class="n">nom_fichier</span> <span class="o">=</span> <span class="s2">&quot;ecriture.csv&quot;</span>

<span class="n">fp</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">nom_fichier</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">csvfp</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
<span class="n">csvfp</span><span class="o">.</span><span class="n">writerow</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">])</span>
<span class="n">csvfp</span><span class="o">.</span><span class="n">writerow</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="n">fp</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="c1"># Après cela, le fichier contiendra les lignes suivantes :</span>
<span class="c1"># 1;5;7</span>
<span class="c1"># 2;3</span>
</pre></div>
</div>
</div>
</div>
<p>La méthode <code class="docutils literal notranslate"><span class="pre">writerow</span></code> prend donc une liste en argument et écrit dans le fichier les éléments de cette liste, séparés par le délimiteur <code class="docutils literal notranslate"><span class="pre">&quot;;&quot;</span></code> spécifié lors de l’appel à la fonction <code class="docutils literal notranslate"><span class="pre">writer</span></code>.
Le retour à la ligne est écrit directement par la méthode <code class="docutils literal notranslate"><span class="pre">writerow</span></code>, vous n’avez pas à vous en occuper.</p>
</div>
<div class="section" id="fichiers-json">
<h3>Fichiers JSON<a class="headerlink" href="#fichiers-json" title="Permalink to this headline">¶</a></h3>
<p>Le module <code class="docutils literal notranslate"><span class="pre">json</span></code> déjà cité plus haut contient également une fonction <code class="docutils literal notranslate"><span class="pre">dump</span></code> permettant d’écrire le contenu d’un dictionnaire (ou d’une liste de dictionnaires) dans un fichier JSON.
La syntaxe d’utilisation de cette fonction est la suivante :</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>

<span class="n">nom_fichier</span> <span class="o">=</span> <span class="s2">&quot;ecriture.json&quot;</span>

<span class="n">liste</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="mi">7</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">fp</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">nom_fichier</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">liste</span><span class="p">,</span> <span class="n">fp</span><span class="p">)</span>
<span class="n">fp</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="c1"># Après cela, le fichier contiendra la ligne suivante :</span>
<span class="c1"># [{&quot;a&quot;: 5}, {&quot;b&quot;: 3, &quot;a&quot;: 7}]</span>
</pre></div>
</div>
</div>
</div>
<p>Vous pouvez vous référer à <a class="reference external" href="https://docs.python.org/fr/3/library/json.html#basic-usage">la documentation de cette fonction</a> pour maîtriser plus finement la mise en forme du contenu du fichier de sortie.</p>
</div>
</div>
<div class="section" id="manipulation-de-fichiers-en-python-avec-le-module-os">
<h2>Manipulation de fichiers en Python avec le module <code class="docutils literal notranslate"><span class="pre">os</span></code><a class="headerlink" href="#manipulation-de-fichiers-en-python-avec-le-module-os" title="Permalink to this headline">¶</a></h2>
<p>Lorsque l’on lit ou écrit des fichiers, il est fréquent de vouloir répéter la même opération sur plusieurs fichiers, par exemple sur tous les fichiers avec l’extension <code class="docutils literal notranslate"><span class="pre">&quot;.txt&quot;</span></code> d’un répertoire donné.
Pour ce faire, on peut utiliser en Python le module <code class="docutils literal notranslate"><span class="pre">os</span></code> qui propose un certain nombre de fonctions standard de manipulation de fichiers.
On utilisera notamment la fonction <code class="docutils literal notranslate"><span class="pre">listdir</span></code> de ce module qui permet de lister l’ensemble des fichiers et sous-répertoires contenus dans un répertoire donné :</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>

<span class="k">for</span> <span class="n">nom_fichier</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="s2">&quot;donnees&quot;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">nom_fichier</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>machin.csv
truc.txt
</pre></div>
</div>
</div>
</div>
<p>La fonction <code class="docutils literal notranslate"><span class="pre">listdir</span></code> peut prendre indifféremment un chemin absolu ou relatif (dans notre exemple, il s’agit d’un chemin relatif qui pointe sur le sous-répertoire <code class="docutils literal notranslate"><span class="pre">&quot;donnees&quot;</span></code> contenu dans le répertoire de travail courant du programme).</p>
<p>Si vous exécutez le code ci-dessus et que votre répertoire <code class="docutils literal notranslate"><span class="pre">&quot;donnees&quot;</span></code> n’est pas vide, vous remarquerez que le nom du fichier stocké dans la variable <code class="docutils literal notranslate"><span class="pre">nom_fichier</span></code> ne contient pas le chemin vers ce fichier.
Or, si l’on souhaite ensuite ouvrir ce fichier (que ce soit en lecture ou en écriture), il faudra bien spécifier ce chemin.
Pour cela, on utilisera la syntaxe suivante :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>

<span class="n">repertoire</span> <span class="o">=</span> <span class="s2">&quot;donnees&quot;</span>
<span class="k">for</span> <span class="n">nom_fichier</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">repertoire</span><span class="p">):</span>
    <span class="n">nom_complet_fichier</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">repertoire</span><span class="p">,</span> <span class="n">nom_fichier</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">nom_fichier</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">nom_complet_fichier</span><span class="p">)</span>
    <span class="n">fp</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">nom_complet_fichier</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
    <span class="c1"># [...]</span>
</pre></div>
</div>
<p>La fonction <code class="docutils literal notranslate"><span class="pre">path.join</span></code> du module <code class="docutils literal notranslate"><span class="pre">os</span></code> permet d’obtenir le chemin complet vers le fichier à partir du nom du répertoire dans lequel il se trouve et du nom du fichier isolé.
Il est préférable d’utiliser cette fonction plutôt que d’effectuer la concaténation des chaînes de caractères correspondantes car la forme des chemins complets dépend du système d’exploitation utilisé, ce que gère intelligemment <code class="docutils literal notranslate"><span class="pre">path.join</span></code>.</p>
</div>
<div class="section" id="bonus-utilisation-de-with">
<h2>Bonus : utilisation de <code class="docutils literal notranslate"><span class="pre">with</span></code><a class="headerlink" href="#bonus-utilisation-de-with" title="Permalink to this headline">¶</a></h2>
<p>Il existe en Python un moyen très efficace de maîtriser la durée de vie d’une variable : il s’agit de la directive <code class="docutils literal notranslate"><span class="pre">with</span></code>, dont la syntaxe est la suivante :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">EXPRESSION</span> <span class="k">as</span> <span class="n">VARIABLE</span><span class="p">:</span>
    <span class="n">BLOC_DE_CODE</span>
</pre></div>
</div>
<p>Le code ci-dessus signifie que l’on va créer une variable <code class="docutils literal notranslate"><span class="pre">VARIABLE</span></code> qui va stocker la valeur de retour de <code class="docutils literal notranslate"><span class="pre">EXPRESSION</span></code> (<a class="reference external" href="https://docs.python.org/2.5/whatsnew/pep-343.html">ceci n’est pas tout à fait exact</a>, mais dans l’exemple qui nous intéresse, cela revient au même), puis le code situé dans <code class="docutils literal notranslate"><span class="pre">BLOC_DE_CODE</span></code> sera exécuté et à la fin de ce bloc de code, <code class="docutils literal notranslate"><span class="pre">VARIABLE</span></code> sera détruite.</p>
<p>Cette syntaxe peut s’avérer fort utile lorsque l’on manipule des fichiers, parce que les pointeurs de fichiers, lorsqu’ils sont détruits, ferment automatiquement le fichier en question, et il n’est donc pas nécessaire de faire appel à la méthode <code class="docutils literal notranslate"><span class="pre">.close()</span></code> explicitement.</p>
<p>On pourra donc écrire :</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;simple.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">texte</span> <span class="ow">in</span> <span class="n">fp</span><span class="o">.</span><span class="n">readlines</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">texte</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>1;2;3;4;5

a;b;c;d;e

xx;xx;xx;xx;xx

0.4;0.5;0.7;0.8;0.9

</pre></div>
</div>
</div>
</div>
<p>et le fichier sera tout de même fermé correctement dès que l’on sortira du bloc <code class="docutils literal notranslate"><span class="pre">with</span></code>.</p>
</div>
<div class="section" id="exercices">
<h2>Exercices<a class="headerlink" href="#exercices" title="Permalink to this headline">¶</a></h2>
<p><strong>Exercice 7.1</strong>
Écrivez une fonction qui affiche, pour chaque fichier d’extension <code class="docutils literal notranslate"><span class="pre">&quot;.txt&quot;</span></code> d’un répertoire passé en argument, le nom du fichier ainsi que son nombre de lignes.</p>
<p><strong>Exercice 7.2</strong>
Écrivez une fonction qui retourne le nombre de fichiers présents dans un répertoire dont le nom est passé en argument.
Vous pourrez vous aider pour cela de la documentation du sous-module <code class="docutils literal notranslate"><span class="pre">path</span></code> du module <code class="docutils literal notranslate"><span class="pre">os</span></code> (<a class="reference external" href="https://docs.python.org/3.5/library/os.path.html">lien</a>).</p>
<hr class="docutils" />
<dl class="footnote brackets">
<dt class="label" id="dialect"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>Le <em>dialecte</em> d’un fichier CSV définit, en fait, bien plus que le caractère de séparation des cellules, comme décrit dans <a class="reference external" href="https://tools.ietf.org/html/rfc4180">ce document</a>.</p>
</dd>
</dl>
</div>
</div>


              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="dict.html" title="previous page">Les dictionnaires</a>
    <a class='right-next' id="next-link" href="api.html" title="next page">Récupération de données à partir d’API web</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Romain Tavenard<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    <script src="../_static/js/index.js"></script>
    
  </body>
</html>